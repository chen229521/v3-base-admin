// vite.config.ts
import process3 from "node:process";
import { defineConfig, loadEnv } from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/vite@5.4.11_@types+node@22.7.9_sass@1.80.4/node_modules/vite/dist/node/index.js";

// build/plugins/index.ts
import vue from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/@vitejs+plugin-vue@5.1.5_vite@5.4.11_@types+node@22.7.9_sass@1.80.4__vue@3.5.12_typescript@5.6.3_/node_modules/@vitejs/plugin-vue/dist/index.mjs";

// build/plugins/router.ts
import ElegantVueRouter from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/@elegant-router+vue@0.3.8/node_modules/@elegant-router/vue/dist/vite.mjs";
function setupElegantRouter() {
  return ElegantVueRouter({
    layouts: {
      base: "src/layouts/base-layout/index.vue",
      blank: "src/layouts/blank-layout/index.vue"
    },
    customRoutes: {
      names: ["exception_403", "exception_404", "exception_500"]
    },
    routePathTransformer(routeName, routePath) {
      const key = routeName;
      if (key === "login") {
        const modules = [
          "pwd-login",
          "code-login",
          "register",
          "reset-pwd",
          "bind-wechat"
        ];
        const moduleReg = modules.join("|");
        return `/login/:module(${moduleReg})?`;
      }
      return routePath;
    },
    onRouteMetaGen(routeName) {
      const key = routeName;
      const constantRoutes = ["login", "403", "404", "500"];
      const meta = {
        title: key,
        i18nKey: `route.${key}`
      };
      if (constantRoutes.includes(key)) {
        meta.constant = true;
      }
      return meta;
    }
  });
}

// build/plugins/unplugin.ts
import process from "node:process";
import path from "node:path";
import Icons from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/unplugin-icons@0.19.3_@vue+compiler-sfc@3.5.12/node_modules/unplugin-icons/dist/vite.js";
import IconsResolver from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/unplugin-icons@0.19.3_@vue+compiler-sfc@3.5.12/node_modules/unplugin-icons/dist/resolver.js";
import Components from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/unplugin-vue-components@0.27.4_@babel+parser@7.26.2_rollup@4.26.0_vue@3.5.12_typescript@5.6.3_/node_modules/unplugin-vue-components/dist/vite.js";
import { AntDesignVueResolver, NaiveUiResolver } from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/unplugin-vue-components@0.27.4_@babel+parser@7.26.2_rollup@4.26.0_vue@3.5.12_typescript@5.6.3_/node_modules/unplugin-vue-components/dist/resolvers.js";
import { FileSystemIconLoader } from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/unplugin-icons@0.19.3_@vue+compiler-sfc@3.5.12/node_modules/unplugin-icons/dist/loaders.js";
import { createSvgIconsPlugin } from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/vite-plugin-svg-icons@2.0.1_vite@5.4.11_@types+node@22.7.9_sass@1.80.4_/node_modules/vite-plugin-svg-icons/dist/index.mjs";
function setupUnplugin(viteEnv) {
  const { VITE_ICON_PREFIX, VITE_ICON_LOCAL_PREFIX } = viteEnv;
  const localIconPath = path.join(process.cwd(), "src/assets/svg-icon");
  console.log(localIconPath);
  const collectionName = VITE_ICON_LOCAL_PREFIX.replace(`${VITE_ICON_PREFIX}-`, "");
  const plugins = [
    Icons({
      compiler: "vue3",
      customCollections: {
        [collectionName]: FileSystemIconLoader(
          localIconPath,
          (svg) => svg.replace(/^<svg\s/, '<svg width="1em" height="1em" ')
        )
      },
      scale: 1,
      defaultClass: "inline-block"
    }),
    Components({
      dts: "src/typings/components.d.ts",
      types: [{ from: "vue-router", names: ["RouterLink", "RouterView"] }],
      resolvers: [
        AntDesignVueResolver({
          importStyle: false
        }),
        NaiveUiResolver(),
        IconsResolver({ customCollections: [collectionName], componentPrefix: VITE_ICON_PREFIX })
      ]
    }),
    createSvgIconsPlugin({
      iconDirs: [localIconPath],
      symbolId: `${VITE_ICON_LOCAL_PREFIX}-[dir]-[name]`,
      inject: "body-last",
      customDomId: "__SVG_ICON_LOCAL__"
    })
  ];
  return plugins;
}

// build/plugins/unocss.ts
import process2 from "node:process";
import path2 from "node:path";
import unocss from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/@unocss+vite@0.63.6_rollup@4.26.0_typescript@5.6.3_vite@5.4.11_@types+node@22.7.9_sass@1.80.4_/node_modules/@unocss/vite/dist/index.mjs";
import presetIcons from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/@unocss+preset-icons@0.63.6/node_modules/@unocss/preset-icons/dist/index.mjs";
import { FileSystemIconLoader as FileSystemIconLoader2 } from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/@iconify+utils@2.1.33/node_modules/@iconify/utils/lib/loader/node-loaders.mjs";
function setupUnocss(viteEnv) {
  const { VITE_ICON_PREFIX, VITE_ICON_LOCAL_PREFIX } = viteEnv;
  const localIconPath = path2.join(process2.cwd(), "src/assets/svg-icon");
  const collectionName = VITE_ICON_LOCAL_PREFIX.replace(`${VITE_ICON_PREFIX}-`, "");
  return unocss({
    presets: [
      presetIcons({
        prefix: `${VITE_ICON_PREFIX}-`,
        scale: 1,
        extraProperties: {
          display: "inline-block"
        },
        collections: {
          [collectionName]: FileSystemIconLoader2(
            localIconPath,
            (svg) => svg.replace(/^<svg\s/, '<svg width="1em" height="1em" ')
          )
        },
        warn: true
      })
    ]
  });
}

// build/plugins/index.ts
function setupVitePlugins(viteEnv, buildTime) {
  const plugin = [
    vue(),
    setupElegantRouter(),
    ...setupUnplugin(viteEnv),
    setupUnocss(viteEnv)
  ];
  return plugin;
}

// vite.config.ts
import { URL, fileURLToPath } from "node:url";

// src/utils/service.ts
import json5 from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/json5@2.2.3/node_modules/json5/lib/index.js";
function createServiceConfig(env) {
  const { VITE_SERVICE_BASE_URL, VITE_OTHER_SERVICE_BASE_URL } = env;
  console.log(VITE_OTHER_SERVICE_BASE_URL);
  let other = {};
  try {
    other = json5.parse(VITE_OTHER_SERVICE_BASE_URL);
  } catch {
    console.error("VITE_OTHER_SERVICE_BASE_URL is not a valid json5 string");
  }
  const httpConfig = {
    baseURL: VITE_SERVICE_BASE_URL,
    other
  };
  const otherHttpKeys = Object.keys(httpConfig.other);
  const otherConfig = otherHttpKeys.map((key) => {
    return {
      key,
      baseURL: httpConfig.other[key],
      proxyPattern: createProxyPattern(key)
    };
  });
  const config = {
    baseURL: httpConfig.baseURL,
    proxyPattern: createProxyPattern(),
    other: otherConfig
  };
  return config;
}
function createProxyPattern(key) {
  if (!key) {
    return "/proxy-default";
  }
  return `/proxy-${key}`;
}

// build/config/proxy.ts
function createViteProxy(env, enable) {
  const isEnableHttpProxy = enable && env.VITE_HTTP_PROXY === "Y";
  if (!isEnableHttpProxy) {
    return void 0;
  }
  const { baseURL, proxyPattern, other } = createServiceConfig(env);
  const proxy = createProxyItem({ baseURL, proxyPattern });
  other.forEach((item) => {
    Object.assign(proxy, createProxyItem(item));
  });
  return proxy;
}
function createProxyItem(item) {
  const proxy = {};
  proxy[item.proxyPattern] = {
    target: item.baseURL,
    changeOrigin: true,
    rewrite: (path3) => path3.replace(new RegExp(`^${item.proxyPattern}`), "")
  };
  return proxy;
}

// build/config/time.ts
import dayjs from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/dayjs@1.11.13/node_modules/dayjs/dayjs.min.js";
import utc from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/dayjs@1.11.13/node_modules/dayjs/plugin/utc.js";
import timezone from "file:///F:/Test/v3-base-admin/node_modules/.pnpm/dayjs@1.11.13/node_modules/dayjs/plugin/timezone.js";
function getBuildTime() {
  dayjs.extend(utc);
  dayjs.extend(timezone);
  const buildTime = dayjs.tz(Date.now(), "Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss");
  return buildTime;
}

// vite.config.ts
var __vite_injected_original_import_meta_url = "file:///F:/Test/v3-base-admin/vite.config.ts";
var vite_config_default = defineConfig((configEnv) => {
  const viteEnv = loadEnv(configEnv.mode, process3.cwd());
  const buildTime = getBuildTime();
  const enableProxy = configEnv.command === "serve" && !configEnv.isPreview;
  return {
    base: viteEnv.VITE_BASE_URL,
    resolve: {
      alias: {
        "~": fileURLToPath(new URL("./", __vite_injected_original_import_meta_url)),
        "@": fileURLToPath(new URL("./src", __vite_injected_original_import_meta_url))
      }
    },
    css: {
      preprocessorOptions: {
        scss: {
          api: "modern-compiler",
          additionalData: `@use "@/styles/scss/global.scss" as *;`
        }
      }
    },
    plugins: setupVitePlugins(viteEnv, buildTime),
    define: {
      BUILD_TIME: JSON.stringify(buildTime)
    },
    server: {
      host: "0.0.0.0",
      port: 9527,
      open: true,
      proxy: createViteProxy(viteEnv, enableProxy),
      fs: {
        cachedChecks: false
      }
    },
    build: {
      reportCompressedSize: false,
      sourcemap: viteEnv.VITE_SOURCE_MAP === "Y",
      commonjsOptions: {
        ignoreTryCatch: false
      }
    }
  };
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcudHMiLCAiYnVpbGQvcGx1Z2lucy9pbmRleC50cyIsICJidWlsZC9wbHVnaW5zL3JvdXRlci50cyIsICJidWlsZC9wbHVnaW5zL3VucGx1Z2luLnRzIiwgImJ1aWxkL3BsdWdpbnMvdW5vY3NzLnRzIiwgInNyYy91dGlscy9zZXJ2aWNlLnRzIiwgImJ1aWxkL2NvbmZpZy9wcm94eS50cyIsICJidWlsZC9jb25maWcvdGltZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkY6XFxcXFRlc3RcXFxcdjMtYmFzZS1hZG1pblwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRjpcXFxcVGVzdFxcXFx2My1iYXNlLWFkbWluXFxcXHZpdGUuY29uZmlnLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9GOi9UZXN0L3YzLWJhc2UtYWRtaW4vdml0ZS5jb25maWcudHNcIjtpbXBvcnQgcHJvY2VzcyBmcm9tICdub2RlOnByb2Nlc3MnO1xyXG5pbXBvcnQgeyBkZWZpbmVDb25maWcsIGxvYWRFbnYgfSBmcm9tICd2aXRlJztcclxuaW1wb3J0IHsgc2V0dXBWaXRlUGx1Z2lucyB9IGZyb20gJy4vYnVpbGQvcGx1Z2lucyc7XHJcbmltcG9ydCB7IFVSTCwgZmlsZVVSTFRvUGF0aCB9IGZyb20gJ25vZGU6dXJsJztcclxuaW1wb3J0IHsgY3JlYXRlVml0ZVByb3h5LCBnZXRCdWlsZFRpbWUgfSBmcm9tICcuL2J1aWxkL2NvbmZpZyc7XHJcblxyXG4vLyBodHRwczovL3ZpdGUuZGV2L2NvbmZpZy9cclxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKChjb25maWdFbnYpID0+IHtcclxuICBjb25zdCB2aXRlRW52ID0gbG9hZEVudihjb25maWdFbnYubW9kZSwgcHJvY2Vzcy5jd2QoKSkgYXMgdW5rbm93biBhcyBFbnYuSW1wb3J0TWV0YTtcclxuICBjb25zdCBidWlsZFRpbWUgPSBnZXRCdWlsZFRpbWUoKTtcclxuXHJcbiAgY29uc3QgZW5hYmxlUHJveHkgPSBjb25maWdFbnYuY29tbWFuZCA9PT0gJ3NlcnZlJyAmJiAhY29uZmlnRW52LmlzUHJldmlldztcclxuICByZXR1cm4ge1xyXG4gICAgYmFzZTogdml0ZUVudi5WSVRFX0JBU0VfVVJMLFxyXG4gICAgcmVzb2x2ZToge1xyXG4gICAgICBhbGlhczoge1xyXG4gICAgICAgICd+JzogZmlsZVVSTFRvUGF0aChuZXcgVVJMKCcuLycsIGltcG9ydC5tZXRhLnVybCkpLFxyXG4gICAgICAgICdAJzogZmlsZVVSTFRvUGF0aChuZXcgVVJMKCcuL3NyYycsIGltcG9ydC5tZXRhLnVybCkpLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNzczoge1xyXG4gICAgICBwcmVwcm9jZXNzb3JPcHRpb25zOiB7XHJcbiAgICAgICAgc2Nzczoge1xyXG4gICAgICAgICAgYXBpOiAnbW9kZXJuLWNvbXBpbGVyJyxcclxuICAgICAgICAgIGFkZGl0aW9uYWxEYXRhOiBgQHVzZSBcIkAvc3R5bGVzL3Njc3MvZ2xvYmFsLnNjc3NcIiBhcyAqO2AsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBwbHVnaW5zOiBzZXR1cFZpdGVQbHVnaW5zKHZpdGVFbnYsIGJ1aWxkVGltZSksXHJcbiAgICBkZWZpbmU6IHtcclxuICAgICAgQlVJTERfVElNRTogSlNPTi5zdHJpbmdpZnkoYnVpbGRUaW1lKSxcclxuICAgIH0sXHJcbiAgICBzZXJ2ZXI6IHtcclxuICAgICAgaG9zdDogJzAuMC4wLjAnLFxyXG4gICAgICBwb3J0OiA5NTI3LFxyXG4gICAgICBvcGVuOiB0cnVlLFxyXG4gICAgICBwcm94eTogY3JlYXRlVml0ZVByb3h5KHZpdGVFbnYsIGVuYWJsZVByb3h5KSxcclxuICAgICAgZnM6IHtcclxuICAgICAgICBjYWNoZWRDaGVja3M6IGZhbHNlLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGJ1aWxkOiB7XHJcbiAgICAgIHJlcG9ydENvbXByZXNzZWRTaXplOiBmYWxzZSxcclxuICAgICAgc291cmNlbWFwOiB2aXRlRW52LlZJVEVfU09VUkNFX01BUCA9PT0gJ1knLFxyXG4gICAgICBjb21tb25qc09wdGlvbnM6IHtcclxuICAgICAgICBpZ25vcmVUcnlDYXRjaDogZmFsc2UsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIH07XHJcbn0pO1xyXG4iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIkY6XFxcXFRlc3RcXFxcdjMtYmFzZS1hZG1pblxcXFxidWlsZFxcXFxwbHVnaW5zXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJGOlxcXFxUZXN0XFxcXHYzLWJhc2UtYWRtaW5cXFxcYnVpbGRcXFxccGx1Z2luc1xcXFxpbmRleC50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRjovVGVzdC92My1iYXNlLWFkbWluL2J1aWxkL3BsdWdpbnMvaW5kZXgudHNcIjtpbXBvcnQgdHlwZSB7IFBsdWdpbk9wdGlvbiB9IGZyb20gJ3ZpdGUnO1xyXG5pbXBvcnQgdnVlIGZyb20gJ0B2aXRlanMvcGx1Z2luLXZ1ZSc7XHJcbmltcG9ydCB7IHNldHVwRWxlZ2FudFJvdXRlciB9IGZyb20gJy4vcm91dGVyJztcclxuaW1wb3J0IHsgc2V0dXBVbnBsdWdpbiB9IGZyb20gJy4vdW5wbHVnaW4nO1xyXG5pbXBvcnQgeyBzZXR1cFVub2NzcyB9IGZyb20gJy4vdW5vY3NzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFZpdGVQbHVnaW5zKHZpdGVFbnY6IEVudi5JbXBvcnRNZXRhLCBidWlsZFRpbWU6IHN0cmluZykge1xyXG4gIGNvbnN0IHBsdWdpbjogUGx1Z2luT3B0aW9uID0gW1xyXG4gICAgdnVlKCksXHJcbiAgICBzZXR1cEVsZWdhbnRSb3V0ZXIoKSxcclxuICAgIC4uLnNldHVwVW5wbHVnaW4odml0ZUVudiksXHJcbiAgICBzZXR1cFVub2Nzcyh2aXRlRW52KSxcclxuICBdO1xyXG5cclxuICByZXR1cm4gcGx1Z2luO1xyXG59XHJcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRjpcXFxcVGVzdFxcXFx2My1iYXNlLWFkbWluXFxcXGJ1aWxkXFxcXHBsdWdpbnNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkY6XFxcXFRlc3RcXFxcdjMtYmFzZS1hZG1pblxcXFxidWlsZFxcXFxwbHVnaW5zXFxcXHJvdXRlci50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRjovVGVzdC92My1iYXNlLWFkbWluL2J1aWxkL3BsdWdpbnMvcm91dGVyLnRzXCI7aW1wb3J0IHR5cGUgeyBSb3V0ZU1ldGEgfSBmcm9tICd2dWUtcm91dGVyJztcclxuaW1wb3J0IEVsZWdhbnRWdWVSb3V0ZXIgZnJvbSAnQGVsZWdhbnQtcm91dGVyL3Z1ZS92aXRlJztcclxuaW1wb3J0IHR5cGUgeyBSb3V0ZUtleSB9IGZyb20gJ0BlbGVnYW50LXJvdXRlci90eXBlcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBFbGVnYW50Um91dGVyKCkge1xyXG4gIHJldHVybiBFbGVnYW50VnVlUm91dGVyKHtcclxuICAgIGxheW91dHM6IHtcclxuICAgICAgYmFzZTogJ3NyYy9sYXlvdXRzL2Jhc2UtbGF5b3V0L2luZGV4LnZ1ZScsXHJcbiAgICAgIGJsYW5rOiAnc3JjL2xheW91dHMvYmxhbmstbGF5b3V0L2luZGV4LnZ1ZScsXHJcbiAgICB9LFxyXG4gICAgY3VzdG9tUm91dGVzOiB7XHJcbiAgICAgIG5hbWVzOiBbJ2V4Y2VwdGlvbl80MDMnLCAnZXhjZXB0aW9uXzQwNCcsICdleGNlcHRpb25fNTAwJ10sXHJcbiAgICB9LFxyXG4gICAgcm91dGVQYXRoVHJhbnNmb3JtZXIocm91dGVOYW1lLCByb3V0ZVBhdGgpIHtcclxuICAgICAgY29uc3Qga2V5ID0gcm91dGVOYW1lIGFzIFJvdXRlS2V5O1xyXG5cclxuICAgICAgaWYgKGtleSA9PT0gJ2xvZ2luJykge1xyXG4gICAgICAgIGNvbnN0IG1vZHVsZXM6IFVuaW9uS2V5LkxvZ2luTW9kdWxlW10gPSBbXHJcbiAgICAgICAgICAncHdkLWxvZ2luJyxcclxuICAgICAgICAgICdjb2RlLWxvZ2luJyxcclxuICAgICAgICAgICdyZWdpc3RlcicsXHJcbiAgICAgICAgICAncmVzZXQtcHdkJyxcclxuICAgICAgICAgICdiaW5kLXdlY2hhdCcsXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgbW9kdWxlUmVnID0gbW9kdWxlcy5qb2luKCd8Jyk7XHJcblxyXG4gICAgICAgIHJldHVybiBgL2xvZ2luLzptb2R1bGUoJHttb2R1bGVSZWd9KT9gO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcm91dGVQYXRoO1xyXG4gICAgfSxcclxuICAgIG9uUm91dGVNZXRhR2VuKHJvdXRlTmFtZSkge1xyXG4gICAgICBjb25zdCBrZXkgPSByb3V0ZU5hbWUgYXMgUm91dGVLZXk7XHJcblxyXG4gICAgICBjb25zdCBjb25zdGFudFJvdXRlczogUm91dGVLZXlbXSA9IFsnbG9naW4nLCAnNDAzJywgJzQwNCcsICc1MDAnXTtcclxuXHJcbiAgICAgIGNvbnN0IG1ldGE6IFBhcnRpYWw8Um91dGVNZXRhPiA9IHtcclxuICAgICAgICB0aXRsZToga2V5LFxyXG4gICAgICAgIGkxOG5LZXk6IGByb3V0ZS4ke2tleX1gIGFzIEFwcC5JMThuLkkxOG5LZXksXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoY29uc3RhbnRSb3V0ZXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgIG1ldGEuY29uc3RhbnQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbWV0YTtcclxuICAgIH0sXHJcbiAgfSk7XHJcbn1cclxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJGOlxcXFxUZXN0XFxcXHYzLWJhc2UtYWRtaW5cXFxcYnVpbGRcXFxccGx1Z2luc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRjpcXFxcVGVzdFxcXFx2My1iYXNlLWFkbWluXFxcXGJ1aWxkXFxcXHBsdWdpbnNcXFxcdW5wbHVnaW4udHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0Y6L1Rlc3QvdjMtYmFzZS1hZG1pbi9idWlsZC9wbHVnaW5zL3VucGx1Z2luLnRzXCI7aW1wb3J0IHByb2Nlc3MgZnJvbSAnbm9kZTpwcm9jZXNzJztcclxuaW1wb3J0IHBhdGggZnJvbSAnbm9kZTpwYXRoJztcclxuaW1wb3J0IHR5cGUgeyBQbHVnaW5PcHRpb24gfSBmcm9tICd2aXRlJztcclxuaW1wb3J0IEljb25zIGZyb20gJ3VucGx1Z2luLWljb25zL3ZpdGUnO1xyXG5pbXBvcnQgSWNvbnNSZXNvbHZlciBmcm9tICd1bnBsdWdpbi1pY29ucy9yZXNvbHZlcic7XHJcbmltcG9ydCBDb21wb25lbnRzIGZyb20gJ3VucGx1Z2luLXZ1ZS1jb21wb25lbnRzL3ZpdGUnO1xyXG5pbXBvcnQgeyBBbnREZXNpZ25WdWVSZXNvbHZlciwgTmFpdmVVaVJlc29sdmVyIH0gZnJvbSAndW5wbHVnaW4tdnVlLWNvbXBvbmVudHMvcmVzb2x2ZXJzJztcclxuaW1wb3J0IHsgRmlsZVN5c3RlbUljb25Mb2FkZXIgfSBmcm9tICd1bnBsdWdpbi1pY29ucy9sb2FkZXJzJztcclxuaW1wb3J0IHsgY3JlYXRlU3ZnSWNvbnNQbHVnaW4gfSBmcm9tICd2aXRlLXBsdWdpbi1zdmctaWNvbnMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwVW5wbHVnaW4odml0ZUVudjogRW52LkltcG9ydE1ldGEpIHtcclxuICBjb25zdCB7IFZJVEVfSUNPTl9QUkVGSVgsIFZJVEVfSUNPTl9MT0NBTF9QUkVGSVggfSA9IHZpdGVFbnY7XHJcblxyXG4gIGNvbnN0IGxvY2FsSWNvblBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3NyYy9hc3NldHMvc3ZnLWljb24nKTtcclxuXHJcbiAgY29uc29sZS5sb2cobG9jYWxJY29uUGF0aCk7XHJcblxyXG4gIC8qKiBUaGUgbmFtZSBvZiB0aGUgbG9jYWwgaWNvbiBjb2xsZWN0aW9uICovXHJcbiAgY29uc3QgY29sbGVjdGlvbk5hbWUgPSBWSVRFX0lDT05fTE9DQUxfUFJFRklYLnJlcGxhY2UoYCR7VklURV9JQ09OX1BSRUZJWH0tYCwgJycpO1xyXG5cclxuICBjb25zdCBwbHVnaW5zOiBQbHVnaW5PcHRpb25bXSA9IFtcclxuICAgIEljb25zKHtcclxuICAgICAgY29tcGlsZXI6ICd2dWUzJyxcclxuICAgICAgY3VzdG9tQ29sbGVjdGlvbnM6IHtcclxuICAgICAgICBbY29sbGVjdGlvbk5hbWVdOiBGaWxlU3lzdGVtSWNvbkxvYWRlcihsb2NhbEljb25QYXRoLCAoc3ZnKSA9PlxyXG4gICAgICAgICAgc3ZnLnJlcGxhY2UoL148c3ZnXFxzLywgJzxzdmcgd2lkdGg9XCIxZW1cIiBoZWlnaHQ9XCIxZW1cIiAnKSxcclxuICAgICAgICApLFxyXG4gICAgICB9LFxyXG4gICAgICBzY2FsZTogMSxcclxuICAgICAgZGVmYXVsdENsYXNzOiAnaW5saW5lLWJsb2NrJyxcclxuICAgIH0pLFxyXG4gICAgQ29tcG9uZW50cyh7XHJcbiAgICAgIGR0czogJ3NyYy90eXBpbmdzL2NvbXBvbmVudHMuZC50cycsXHJcbiAgICAgIHR5cGVzOiBbeyBmcm9tOiAndnVlLXJvdXRlcicsIG5hbWVzOiBbJ1JvdXRlckxpbmsnLCAnUm91dGVyVmlldyddIH1dLFxyXG4gICAgICByZXNvbHZlcnM6IFtcclxuICAgICAgICBBbnREZXNpZ25WdWVSZXNvbHZlcih7XHJcbiAgICAgICAgICBpbXBvcnRTdHlsZTogZmFsc2UsXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgTmFpdmVVaVJlc29sdmVyKCksXHJcbiAgICAgICAgSWNvbnNSZXNvbHZlcih7IGN1c3RvbUNvbGxlY3Rpb25zOiBbY29sbGVjdGlvbk5hbWVdLCBjb21wb25lbnRQcmVmaXg6IFZJVEVfSUNPTl9QUkVGSVggfSksXHJcbiAgICAgIF0sXHJcbiAgICB9KSxcclxuICAgIGNyZWF0ZVN2Z0ljb25zUGx1Z2luKHtcclxuICAgICAgaWNvbkRpcnM6IFtsb2NhbEljb25QYXRoXSxcclxuICAgICAgc3ltYm9sSWQ6IGAke1ZJVEVfSUNPTl9MT0NBTF9QUkVGSVh9LVtkaXJdLVtuYW1lXWAsXHJcbiAgICAgIGluamVjdDogJ2JvZHktbGFzdCcsXHJcbiAgICAgIGN1c3RvbURvbUlkOiAnX19TVkdfSUNPTl9MT0NBTF9fJyxcclxuICAgIH0pLFxyXG4gIF07XHJcblxyXG4gIHJldHVybiBwbHVnaW5zO1xyXG59XHJcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRjpcXFxcVGVzdFxcXFx2My1iYXNlLWFkbWluXFxcXGJ1aWxkXFxcXHBsdWdpbnNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIkY6XFxcXFRlc3RcXFxcdjMtYmFzZS1hZG1pblxcXFxidWlsZFxcXFxwbHVnaW5zXFxcXHVub2Nzcy50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vRjovVGVzdC92My1iYXNlLWFkbWluL2J1aWxkL3BsdWdpbnMvdW5vY3NzLnRzXCI7aW1wb3J0IHByb2Nlc3MgZnJvbSAnbm9kZTpwcm9jZXNzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdub2RlOnBhdGgnXHJcbmltcG9ydCB1bm9jc3MgZnJvbSAnQHVub2Nzcy92aXRlJ1xyXG5pbXBvcnQgcHJlc2V0SWNvbnMgZnJvbSAnQHVub2Nzcy9wcmVzZXQtaWNvbnMnXHJcbmltcG9ydCB7IEZpbGVTeXN0ZW1JY29uTG9hZGVyIH0gZnJvbSAnQGljb25pZnkvdXRpbHMvbGliL2xvYWRlci9ub2RlLWxvYWRlcnMnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBVbm9jc3Modml0ZUVudjogRW52LkltcG9ydE1ldGEpIHtcclxuICAgIGNvbnN0IHsgVklURV9JQ09OX1BSRUZJWCwgVklURV9JQ09OX0xPQ0FMX1BSRUZJWCB9ID0gdml0ZUVudlxyXG5cclxuICAgIGNvbnN0IGxvY2FsSWNvblBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3NyYy9hc3NldHMvc3ZnLWljb24nKVxyXG5cclxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgbG9jYWwgaWNvbiBjb2xsZWN0aW9uICovXHJcbiAgICBjb25zdCBjb2xsZWN0aW9uTmFtZSA9IFZJVEVfSUNPTl9MT0NBTF9QUkVGSVgucmVwbGFjZShgJHtWSVRFX0lDT05fUFJFRklYfS1gLCAnJylcclxuXHJcbiAgICByZXR1cm4gdW5vY3NzKHtcclxuICAgICAgICBwcmVzZXRzOiBbXHJcbiAgICAgICAgICAgIHByZXNldEljb25zKHtcclxuICAgICAgICAgICAgICAgIHByZWZpeDogYCR7VklURV9JQ09OX1BSRUZJWH0tYCxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiAxLFxyXG4gICAgICAgICAgICAgICAgZXh0cmFQcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaydcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFtjb2xsZWN0aW9uTmFtZV06IEZpbGVTeXN0ZW1JY29uTG9hZGVyKGxvY2FsSWNvblBhdGgsIChzdmcpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN2Zy5yZXBsYWNlKC9ePHN2Z1xccy8sICc8c3ZnIHdpZHRoPVwiMWVtXCIgaGVpZ2h0PVwiMWVtXCIgJylcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgd2FybjogdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIF1cclxuICAgIH0pXHJcbn1cclxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJGOlxcXFxUZXN0XFxcXHYzLWJhc2UtYWRtaW5cXFxcc3JjXFxcXHV0aWxzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJGOlxcXFxUZXN0XFxcXHYzLWJhc2UtYWRtaW5cXFxcc3JjXFxcXHV0aWxzXFxcXHNlcnZpY2UudHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0Y6L1Rlc3QvdjMtYmFzZS1hZG1pbi9zcmMvdXRpbHMvc2VydmljZS50c1wiO2ltcG9ydCBqc29uNSBmcm9tICdqc29uNSc7XG5cbi8qKlxuICogXHU1MjFCXHU1RUZBXHU2NzBEXHU1MkExXHU5MTREXHU3RjZFXG4gKiBAcGFyYW0gZW52IFx1NTMwNVx1NTQyQlx1NzNBRlx1NTg4M1x1NTNEOFx1OTFDRlx1NzY4NEltcG9ydE1ldGFcdTVCRjlcdThDNjFcbiAqIEByZXR1cm5zIFx1OEZENFx1NTZERVx1NjcwRFx1NTJBMVx1OTE0RFx1N0Y2RVx1NUJGOVx1OEM2MVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VydmljZUNvbmZpZyhlbnY6IEVudi5JbXBvcnRNZXRhKSB7XG4gIC8vIFx1NEVDRVx1NzNBRlx1NTg4M1x1NTNEOFx1OTFDRlx1NEUyRFx1ODlFM1x1Njc4NFx1NjcwRFx1NTJBMVx1NTdGQVx1Nzg0MFVSTFxuICBjb25zdCB7IFZJVEVfU0VSVklDRV9CQVNFX1VSTCwgVklURV9PVEhFUl9TRVJWSUNFX0JBU0VfVVJMIH0gPSBlbnY7XG5cbiAgY29uc29sZS5sb2coVklURV9PVEhFUl9TRVJWSUNFX0JBU0VfVVJMKTtcblxuICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTUxNzZcdTRFRDZcdTY3MERcdTUyQTFcdTU3RkFcdTc4NDBVUkxcdTc2ODRcdTkxNERcdTdGNkVcdTVCRjlcdThDNjFcbiAgbGV0IG90aGVyID0ge30gYXMgUmVjb3JkPEFwcC5TZXJ2aWNlLk90aGVyQmFzZVVSTEtleSwgc3RyaW5nPjtcbiAgdHJ5IHtcbiAgICBvdGhlciA9IGpzb241LnBhcnNlKFZJVEVfT1RIRVJfU0VSVklDRV9CQVNFX1VSTCk7XG4gIH0gY2F0Y2gge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5lcnJvcignVklURV9PVEhFUl9TRVJWSUNFX0JBU0VfVVJMIGlzIG5vdCBhIHZhbGlkIGpzb241IHN0cmluZycpO1xuICB9XG5cbiAgLy8gXHU2Nzg0XHU1RUZBXHU3QjgwXHU1MzU1XHU3Njg0SFRUUFx1NjcwRFx1NTJBMVx1OTE0RFx1N0Y2RVx1NUJGOVx1OEM2MVxuICBjb25zdCBodHRwQ29uZmlnOiBBcHAuU2VydmljZS5TaW1wbGVTZXJ2aWNlQ29uZmlnID0ge1xuICAgIGJhc2VVUkw6IFZJVEVfU0VSVklDRV9CQVNFX1VSTCxcbiAgICBvdGhlcixcbiAgfTtcblxuICAvLyBcdTgzQjdcdTUzRDZcdTUxNzZcdTRFRDZIVFRQXHU2NzBEXHU1MkExXHU3Njg0XHU5NTJFXG4gIGNvbnN0IG90aGVySHR0cEtleXMgPSBPYmplY3Qua2V5cyhodHRwQ29uZmlnLm90aGVyKSBhcyBBcHAuU2VydmljZS5PdGhlckJhc2VVUkxLZXlbXTtcblxuICAvLyBcdTY4MzlcdTYzNkVcdTUxNzZcdTRFRDZIVFRQXHU2NzBEXHU1MkExXHU3Njg0XHU5NTJFXHVGRjBDXHU2Nzg0XHU1RUZBXHU2QkNGXHU0RTJBXHU2NzBEXHU1MkExXHU3Njg0XHU5MTREXHU3RjZFXHU5ODc5XHU2NTcwXHU3RUM0XG4gIGNvbnN0IG90aGVyQ29uZmlnOiBBcHAuU2VydmljZS5PdGhlclNlcnZpY2VDb25maWdJdGVtW10gPSBvdGhlckh0dHBLZXlzLm1hcCgoa2V5KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleSxcbiAgICAgIGJhc2VVUkw6IGh0dHBDb25maWcub3RoZXJba2V5XSxcbiAgICAgIHByb3h5UGF0dGVybjogY3JlYXRlUHJveHlQYXR0ZXJuKGtleSksXG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gXHU2Nzg0XHU1RUZBXHU2NzAwXHU3RUM4XHU3Njg0XHU2NzBEXHU1MkExXHU5MTREXHU3RjZFXHU1QkY5XHU4QzYxXG4gIGNvbnN0IGNvbmZpZzogQXBwLlNlcnZpY2UuU2VydmljZUNvbmZpZyA9IHtcbiAgICBiYXNlVVJMOiBodHRwQ29uZmlnLmJhc2VVUkwsXG4gICAgcHJveHlQYXR0ZXJuOiBjcmVhdGVQcm94eVBhdHRlcm4oKSxcbiAgICBvdGhlcjogb3RoZXJDb25maWcsXG4gIH07XG5cbiAgLy8gXHU4RkQ0XHU1NkRFXHU2NzBEXHU1MkExXHU5MTREXHU3RjZFXHU1QkY5XHU4QzYxXG4gIHJldHVybiBjb25maWc7XG59XG5cbi8qKlxuICogXHU1MjFCXHU1RUZBXHU0RUUzXHU3NDA2XHU2QTIxXHU1RjBGXHU3Njg0XHU4REVGXHU1Rjg0XG4gKiBAcGFyYW0ga2V5IFx1NTE3Nlx1NEVENlx1NjcwRFx1NTJBMVx1NzY4NFx1OTUyRVx1RkYwQ1x1NTNFRlx1OTAwOVxuICogQHJldHVybnMgXHU4RkQ0XHU1NkRFXHU0RUUzXHU3NDA2XHU2QTIxXHU1RjBGXHU3Njg0XHU4REVGXHU1Rjg0XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVByb3h5UGF0dGVybihrZXk/OiBBcHAuU2VydmljZS5PdGhlckJhc2VVUkxLZXkpIHtcbiAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU5NTJFXHVGRjBDXHU1MjE5XHU4RkQ0XHU1NkRFXHU5RUQ4XHU4QkE0XHU3Njg0XHU0RUUzXHU3NDA2XHU2QTIxXHU1RjBGXHU4REVGXHU1Rjg0XG4gIGlmICgha2V5KSB7XG4gICAgcmV0dXJuICcvcHJveHktZGVmYXVsdCc7XG4gIH1cblxuICAvLyBcdTY4MzlcdTYzNkVcdTk1MkVcdThGRDRcdTU2REVcdTcyNzlcdTVCOUFcdTc2ODRcdTRFRTNcdTc0MDZcdTZBMjFcdTVGMEZcdThERUZcdTVGODRcbiAgcmV0dXJuIGAvcHJveHktJHtrZXl9YDtcbn1cblxuLyoqXG4gKiBcdTgzQjdcdTUzRDZcdTY3MERcdTUyQTFcdTc2ODRcdTU3RkFcdTc4NDBVUkxcbiAqIEBwYXJhbSBlbnYgXHU1MzA1XHU1NDJCXHU3M0FGXHU1ODgzXHU1M0Q4XHU5MUNGXHU3Njg0SW1wb3J0TWV0YVx1NUJGOVx1OEM2MVxuICogQHBhcmFtIGlzUHJveHkgXHU2NjJGXHU1NDI2XHU0RjdGXHU3NTI4XHU0RUUzXHU3NDA2XHU2QTIxXHU1RjBGXG4gKiBAcmV0dXJucyBcdThGRDRcdTU2REVcdTY3MERcdTUyQTFcdTc2ODRcdTU3RkFcdTc4NDBVUkxcdTkxNERcdTdGNkVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VCYXNlVVJMKGVudjogRW52LkltcG9ydE1ldGEsIGlzUHJveHk6IGJvb2xlYW4pIHtcbiAgLy8gXHU4M0I3XHU1M0Q2XHU2NzBEXHU1MkExXHU5MTREXHU3RjZFXHU0RTJEXHU3Njg0XHU1N0ZBXHU3ODQwVVJMXHU1NDhDXHU1MTc2XHU1QjgzXHU2NzBEXHU1MkExXHU5MTREXHU3RjZFXG4gIGNvbnN0IHsgYmFzZVVSTCwgb3RoZXIgfSA9IGNyZWF0ZVNlcnZpY2VDb25maWcoZW52KTtcblxuICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTUxNzZcdTRFRDZcdTY3MERcdTUyQTFcdTc2ODRcdTU3RkFcdTc4NDBVUkxcdTkxNERcdTdGNkVcdTVCRjlcdThDNjFcbiAgY29uc3Qgb3RoZXJCYXNlVVJMID0ge30gYXMgUmVjb3JkPEFwcC5TZXJ2aWNlLk90aGVyQmFzZVVSTEtleSwgc3RyaW5nPjtcblxuICAvLyBcdTkwNERcdTUzODZcdTUxNzZcdTRFRDZcdTY3MERcdTUyQTFcdTkxNERcdTdGNkVcdUZGMENcdTY4MzlcdTYzNkVcdTY2MkZcdTU0MjZcdTRGN0ZcdTc1MjhcdTRFRTNcdTc0MDZcdTZBMjFcdTVGMEZcdThCQkVcdTdGNkVcdTc2RjhcdTVFOTRcdTc2ODRVUkxcbiAgb3RoZXIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIG90aGVyQmFzZVVSTFtpdGVtLmtleV0gPSBpc1Byb3h5ID8gaXRlbS5wcm94eVBhdHRlcm4gOiBpdGVtLmJhc2VVUkw7XG4gIH0pO1xuXG4gIC8vIFx1OEZENFx1NTZERVx1NjcwRFx1NTJBMVx1NzY4NFx1NTdGQVx1Nzg0MFVSTFx1OTE0RFx1N0Y2RVx1RkYwQ1x1NTMwNVx1NjJFQ1x1NEUzQlx1ODk4MVx1NTdGQVx1Nzg0MFVSTFx1NTQ4Q1x1NTE3Nlx1NUI4M1x1NjcwRFx1NTJBMVx1NzY4NFVSTFxuICByZXR1cm4ge1xuICAgIGJhc2VVUkw6IGlzUHJveHkgPyBjcmVhdGVQcm94eVBhdHRlcm4oKSA6IGJhc2VVUkwsXG4gICAgb3RoZXJCYXNlVVJMLFxuICB9O1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCJGOlxcXFxUZXN0XFxcXHYzLWJhc2UtYWRtaW5cXFxcYnVpbGRcXFxcY29uZmlnXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCJGOlxcXFxUZXN0XFxcXHYzLWJhc2UtYWRtaW5cXFxcYnVpbGRcXFxcY29uZmlnXFxcXHByb3h5LnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9GOi9UZXN0L3YzLWJhc2UtYWRtaW4vYnVpbGQvY29uZmlnL3Byb3h5LnRzXCI7aW1wb3J0IHR5cGUgeyBQcm94eU9wdGlvbnMgfSBmcm9tICd2aXRlJztcclxuaW1wb3J0IHsgY3JlYXRlU2VydmljZUNvbmZpZyB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9zZXJ2aWNlJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG4vKipcclxuICogXHU1MjFCXHU1RUZBIFZpdGUgXHU0RUUzXHU3NDA2XHU5MTREXHU3RjZFXHJcbiAqXHJcbiAqIEBwYXJhbSBlbnYgXHU3M0FGXHU1ODgzXHU1M0Q4XHU5MUNGXHVGRjBDXHU3NTI4XHU0RThFXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1NDJGXHU3NTI4IEhUVFAgXHU0RUUzXHU3NDA2XHJcbiAqIEBwYXJhbSBlbmFibGUgXHU2NjJGXHU1NDI2XHU1NDJGXHU3NTI4XHU0RUUzXHU3NDA2XHU3Njg0XHU2ODA3XHU1RkQ3XHJcbiAqIEByZXR1cm5zIFx1NTk4Mlx1Njc5Q1x1NjcyQVx1NTQyRlx1NzUyOCBIVFRQIFx1NEVFM1x1NzQwNlx1RkYwQ1x1NTIxOVx1OEZENFx1NTZERSB1bmRlZmluZWRcdUZGMUJcdTU0MjZcdTUyMTlcdThGRDRcdTU2REVcdTRFRTNcdTc0MDZcdTkxNERcdTdGNkVcdTVCRjlcdThDNjFcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWaXRlUHJveHkoZW52OiBFbnYuSW1wb3J0TWV0YSwgZW5hYmxlOiBib29sZWFuKSB7XHJcbiAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1NDJGXHU3NTI4IEhUVFAgXHU0RUUzXHU3NDA2XHJcbiAgY29uc3QgaXNFbmFibGVIdHRwUHJveHkgPSBlbmFibGUgJiYgZW52LlZJVEVfSFRUUF9QUk9YWSA9PT0gJ1knO1xyXG4gIGlmICghaXNFbmFibGVIdHRwUHJveHkpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICAvLyBcdTg5RTNcdTY3ODRcdTY3MERcdTUyQTFcdTkxNERcdTdGNkVcdUZGMENcdTUzMDVcdTYyRUNcdTU3RkFcdTc4NDAgVVJMXHUzMDAxXHU0RUUzXHU3NDA2XHU2QTIxXHU1RjBGXHU1NDhDXHU1MTc2XHU0RUQ2XHU5MTREXHU3RjZFXHU5ODc5XHJcbiAgY29uc3QgeyBiYXNlVVJMLCBwcm94eVBhdHRlcm4sIG90aGVyIH0gPSBjcmVhdGVTZXJ2aWNlQ29uZmlnKGVudik7XHJcbiAgLy8gXHU1MjFCXHU1RUZBXHU0RUUzXHU3NDA2XHU5MTREXHU3RjZFXHU5ODc5XHVGRjBDXHU4RkQ5XHU2NjJGXHU0RTAwXHU0RTJBXHU2NjIwXHU1QzA0XHVGRjBDXHU5NTJFXHU2NjJGXHU0RUUzXHU3NDA2XHU2QTIxXHU1RjBGXHVGRjBDXHU1MDNDXHU2NjJGXHU0RUUzXHU3NDA2XHU5MTREXHU3RjZFXHJcbiAgY29uc3QgcHJveHk6IFJlY29yZDxzdHJpbmcsIFByb3h5T3B0aW9ucz4gPSBjcmVhdGVQcm94eUl0ZW0oeyBiYXNlVVJMLCBwcm94eVBhdHRlcm4gfSk7XHJcbiAgLy8gXHU5MDREXHU1Mzg2XHU1MTc2XHU0RUQ2XHU5MTREXHU3RjZFXHU5ODc5XHVGRjBDXHU1RTc2XHU1QzA2XHU1MTc2XHU2REZCXHU1MkEwXHU1MjMwXHU0RUUzXHU3NDA2XHU5MTREXHU3RjZFXHU0RTJEXHJcbiAgb3RoZXIuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgT2JqZWN0LmFzc2lnbihwcm94eSwgY3JlYXRlUHJveHlJdGVtKGl0ZW0pKTtcclxuICB9KTtcclxuXHJcbiAgLy8gXHU4RkQ0XHU1NkRFXHU1QjhDXHU2NTc0XHU3Njg0XHU0RUUzXHU3NDA2XHU5MTREXHU3RjZFXHJcbiAgcmV0dXJuIHByb3h5O1xyXG59XHJcblxyXG4vKipcclxuICogXHU1MjFCXHU1RUZBXHU1MzU1XHU0RTJBXHU0RUUzXHU3NDA2XHU5MTREXHU3RjZFXHU5ODc5XHJcbiAqXHJcbiAqIEBwYXJhbSBpdGVtIFx1NjcwRFx1NTJBMVx1OTE0RFx1N0Y2RVx1OTg3OVx1RkYwQ1x1NTMwNVx1NjJFQ1x1NTdGQVx1Nzg0MCBVUkwgXHU1NDhDXHU0RUUzXHU3NDA2XHU2QTIxXHU1RjBGXHJcbiAqIEByZXR1cm5zIFx1OEZENFx1NTZERVx1NEUwMFx1NEUyQVx1NjYyMFx1NUMwNFx1RkYwQ1x1OTUyRVx1NjYyRlx1NEVFM1x1NzQwNlx1NkEyMVx1NUYwRlx1RkYwQ1x1NTAzQ1x1NjYyRlx1NEVFM1x1NzQwNlx1OTE0RFx1N0Y2RVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUHJveHlJdGVtKGl0ZW06IEFwcC5TZXJ2aWNlLlNlcnZpY2VDb25maWdJdGVtKSB7XHJcbiAgY29uc3QgcHJveHk6IFJlY29yZDxzdHJpbmcsIFByb3h5T3B0aW9ucz4gPSB7fTtcclxuXHJcbiAgLy8gXHU4QkJFXHU3RjZFXHU0RUUzXHU3NDA2XHU5MTREXHU3RjZFXHU5ODc5XHVGRjBDXHU1MzA1XHU2MkVDXHU3NkVFXHU2ODA3IFVSTFx1MzAwMVx1NjYyRlx1NTQyNlx1NjZGNFx1NjUzOVx1NkU5MFx1NEVFNVx1NTNDQVx1OERFRlx1NUY4NFx1OTFDRFx1NTE5OVx1ODlDNFx1NTIxOVxyXG4gIHByb3h5W2l0ZW0ucHJveHlQYXR0ZXJuXSA9IHtcclxuICAgIHRhcmdldDogaXRlbS5iYXNlVVJMLFxyXG4gICAgY2hhbmdlT3JpZ2luOiB0cnVlLFxyXG4gICAgcmV3cml0ZTogKHBhdGgpID0+IHBhdGgucmVwbGFjZShuZXcgUmVnRXhwKGBeJHtpdGVtLnByb3h5UGF0dGVybn1gKSwgJycpLFxyXG4gIH07XHJcbiAgcmV0dXJuIHByb3h5O1xyXG59XHJcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRjpcXFxcVGVzdFxcXFx2My1iYXNlLWFkbWluXFxcXGJ1aWxkXFxcXGNvbmZpZ1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRjpcXFxcVGVzdFxcXFx2My1iYXNlLWFkbWluXFxcXGJ1aWxkXFxcXGNvbmZpZ1xcXFx0aW1lLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9GOi9UZXN0L3YzLWJhc2UtYWRtaW4vYnVpbGQvY29uZmlnL3RpbWUudHNcIjtpbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnXHJcbmltcG9ydCB1dGMgZnJvbSAnZGF5anMvcGx1Z2luL3V0YydcclxuaW1wb3J0IHRpbWV6b25lIGZyb20gJ2RheWpzL3BsdWdpbi90aW1lem9uZSdcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRCdWlsZFRpbWUoKSB7XHJcbiAgICBkYXlqcy5leHRlbmQodXRjKVxyXG4gICAgZGF5anMuZXh0ZW5kKHRpbWV6b25lKVxyXG5cclxuICAgIGNvbnN0IGJ1aWxkVGltZSA9IGRheWpzLnR6KERhdGUubm93KCksICdBc2lhL1NoYW5naGFpJykuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJylcclxuXHJcbiAgICByZXR1cm4gYnVpbGRUaW1lXHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUF1UCxPQUFPQSxjQUFhO0FBQzNRLFNBQVMsY0FBYyxlQUFlOzs7QUNBdEMsT0FBTyxTQUFTOzs7QUNBaEIsT0FBTyxzQkFBc0I7QUFHdEIsU0FBUyxxQkFBcUI7QUFDbkMsU0FBTyxpQkFBaUI7QUFBQSxJQUN0QixTQUFTO0FBQUEsTUFDUCxNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsSUFDVDtBQUFBLElBQ0EsY0FBYztBQUFBLE1BQ1osT0FBTyxDQUFDLGlCQUFpQixpQkFBaUIsZUFBZTtBQUFBLElBQzNEO0FBQUEsSUFDQSxxQkFBcUIsV0FBVyxXQUFXO0FBQ3pDLFlBQU0sTUFBTTtBQUVaLFVBQUksUUFBUSxTQUFTO0FBQ25CLGNBQU0sVUFBa0M7QUFBQSxVQUN0QztBQUFBLFVBQ0E7QUFBQSxVQUNBO0FBQUEsVUFDQTtBQUFBLFVBQ0E7QUFBQSxRQUNGO0FBRUEsY0FBTSxZQUFZLFFBQVEsS0FBSyxHQUFHO0FBRWxDLGVBQU8sa0JBQWtCLFNBQVM7QUFBQSxNQUNwQztBQUVBLGFBQU87QUFBQSxJQUNUO0FBQUEsSUFDQSxlQUFlLFdBQVc7QUFDeEIsWUFBTSxNQUFNO0FBRVosWUFBTSxpQkFBNkIsQ0FBQyxTQUFTLE9BQU8sT0FBTyxLQUFL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UUFDbEI7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLElBQ0EsU0FBUyxpQkFBaUIsU0FBUyxTQUFTO0FBQUEsSUFDNUMsUUFBUTtBQUFBLE1BQ04sWUFBWSxLQUFLLFVBQVUsU0FBUztBQUFBLElBQ3RDO0FBQUEsSUFDQSxRQUFRO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixPQUFPLGdCQUFnQixTQUFTLFdBQVc7QUFBQSxNQUMzQyxJQUFJO0FBQUEsUUFDRixjQUFjO0FBQUEsTUFDaEI7QUFBQSxJQUNGO0FBQUEsSUFDQSxPQUFPO0FBQUEsTUFDTCxzQkFBc0I7QUFBQSxNQUN0QixXQUFXLFFBQVEsb0JBQW9CO0FBQUEsTUFDdkMsaUJBQWlCO0FBQUEsUUFDZixnQkFBZ0I7QUFBQSxNQUNsQjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQ0YsQ0FBQzsiLAogICJuYW1lcyI6IFsicHJvY2VzcyIsICJwcm9jZXNzIiwgInBhdGgiLCAiRmlsZVN5c3RlbUljb25Mb2FkZXIiLCAicGF0aCIsICJwcm9jZXNzIiwgIkZpbGVTeXN0ZW1JY29uTG9hZGVyIiwgInBhdGgiLCAicHJvY2VzcyJdCn0K
